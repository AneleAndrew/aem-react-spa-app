{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setHasBabelPlugin = exports.ReportChunks = exports.MODULE_IDS = exports.CHUNK_NAMES = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _requireUniversalModule = require('./requireUniversalModule');\n\nObject.defineProperty(exports, 'CHUNK_NAMES', {\n  enumerable: true,\n  get: function get() {\n    return _requireUniversalModule.CHUNK_NAMES;\n  }\n});\nObject.defineProperty(exports, 'MODULE_IDS', {\n  enumerable: true,\n  get: function get() {\n    return _requireUniversalModule.MODULE_IDS;\n  }\n});\n\nvar _reportChunks = require('./report-chunks');\n\nObject.defineProperty(exports, 'ReportChunks', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_reportChunks).default;\n  }\n});\nexports.default = universal;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _requireUniversalModule2 = _interopRequireDefault(_requireUniversalModule);\n\nvar _context = require('./context');\n\nvar _context2 = _interopRequireDefault(_context);\n\nvar _utils = require('./utils');\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nvar hasBabelPlugin = false;\n\nvar isHMR = function isHMR() {\n  return (// $FlowIgnore\n    module.hot && (module.hot.data || module.hot.status() === 'apply')\n  );\n};\n\nvar setHasBabelPlugin = exports.setHasBabelPlugin = function setHasBabelPlugin() {\n  hasBabelPlugin = true;\n};\n\nfunction universal(asyncModule) {\n  var _class, _temp;\n\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var userRender = opts.render,\n      _opts$loading = opts.loading,\n      Loading = _opts$loading === undefined ? _utils.DefaultLoading : _opts$loading,\n      _opts$error = opts.error,\n      Err = _opts$error === undefined ? _utils.DefaultError : _opts$error,\n      _opts$minDelay = opts.minDelay,\n      minDelay = _opts$minDelay === undefined ? 0 : _opts$minDelay,\n      _opts$alwaysDelay = opts.alwaysDelay,\n      alwaysDelay = _opts$alwaysDelay === undefined ? false : _opts$alwaysDelay,\n      _opts$testBabelPlugin = opts.testBabelPlugin,\n      testBabelPlugin = _opts$testBabelPlugin === undefined ? false : _opts$testBabelPlugin,\n      _opts$loadingTransiti = opts.loadingTransition,\n      loadingTransition = _opts$loadingTransiti === undefined ? true : _opts$loadingTransiti,\n      options = _objectWithoutProperties(opts, ['render', 'loading', 'error', 'minDelay', 'alwaysDelay', 'testBabelPlugin', 'loadingTransition']);\n\n  var renderFunc = userRender || (0, _utils.createDefaultRender)(Loading, Err);\n  var isDynamic = hasBabelPlugin || testBabelPlugin;\n  options.isDynamic = isDynamic;\n  options.usesBabelPlugin = hasBabelPlugin;\n  options.modCache = {};\n  options.promCache = {};\n  return _temp = _class = function (_React$Component) {\n    _inherits(UniversalComponent, _React$Component);\n\n    _createClass(UniversalComponent, [{\n      key: 'requireAsyncInner',\n      value: function requireAsyncInner(requireAsync, props, state, isMount) {\n        var _this2 = this;\n\n        if (!state.mod && loadingTransition) {\n          this.update({\n            mod: null,\n            props: props\n          }); // display `loading` during componentWillReceiveProps\n        }\n\n        var time = new Date();\n        requireAsync(props).then(function (mod) {\n          var state = {\n            mod: mod,\n            props: props\n          };\n          var timeLapsed = new Date() - time;\n\n          if (timeLapsed < minDelay) {\n            var extraDelay = minDelay - timeLapsed;\n            return setTimeout(function () {\n              return _this2.update(state, isMount);\n            }, extraDelay);\n          }\n\n          _this2.update(state, isMount);\n        }).catch(function (error) {\n          return _this2.update({\n            error: error,\n            props: props\n          });\n        });\n      }\n    }, {\n      key: 'handleBefore',\n      value: function handleBefore(isMount, isSync) {\n        var isServer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n        if (this.props.onBefore) {\n          var onBefore = this.props.onBefore;\n          var info = {\n            isMount: isMount,\n            isSync: isSync,\n            isServer: isServer\n          };\n          onBefore(info);\n        }\n      }\n    }, {\n      key: 'handleAfter',\n      value: function handleAfter(state, isMount, isSync, isServer) {\n        var mod = state.mod,\n            error = state.error;\n\n        if (mod && !error) {\n          (0, _hoistNonReactStatics2.default)(UniversalComponent, mod, {\n            preload: true,\n            preloadWeak: true\n          });\n\n          if (this.props.onAfter) {\n            var onAfter = this.props.onAfter;\n            var info = {\n              isMount: isMount,\n              isSync: isSync,\n              isServer: isServer\n            };\n            onAfter(info, mod);\n          }\n        } else if (error && this.props.onError) {\n          this.props.onError(error);\n        }\n\n        this.setState(state);\n      } // $FlowFixMe\n\n    }, {\n      key: 'init',\n      value: function init(props) {\n        var _req = (0, _requireUniversalModule2.default)(asyncModule, options, props),\n            addModule = _req.addModule,\n            requireSync = _req.requireSync,\n            requireAsync = _req.requireAsync,\n            asyncOnly = _req.asyncOnly;\n\n        var mod = void 0;\n\n        try {\n          mod = requireSync(props);\n        } catch (error) {\n          return (0, _helpers.__update)(props, {\n            error: error,\n            props: props\n          }, this._initialized);\n        }\n\n        this._asyncOnly = asyncOnly;\n        var chunkName = addModule(props); // record the module for SSR flushing :)\n\n        if (this.context && this.context.report) {\n          this.context.report(chunkName);\n        }\n\n        if (mod || _utils.isServer) {\n          this.handleBefore(true, true, _utils.isServer);\n          return (0, _helpers.__update)(props, {\n            asyncOnly: asyncOnly,\n            props: props,\n            mod: mod\n          }, this._initialized, true, true, _utils.isServer);\n        }\n\n        this.handleBefore(true, false);\n        this.requireAsyncInner(requireAsync, props, {\n          props: props,\n          asyncOnly: asyncOnly,\n          mod: mod\n        }, true);\n        return {\n          mod: mod,\n          asyncOnly: asyncOnly,\n          props: props\n        };\n      }\n    }], [{\n      key: 'preload',\n      value: function preload(props) {\n        props = props || {};\n\n        var _req2 = (0, _requireUniversalModule2.default)(asyncModule, options, props),\n            requireAsync = _req2.requireAsync,\n            requireSync = _req2.requireSync;\n\n        var mod = void 0;\n\n        try {\n          mod = requireSync(props);\n        } catch (error) {\n          return Promise.reject(error);\n        }\n\n        return Promise.resolve().then(function () {\n          if (mod) return mod;\n          return requireAsync(props);\n        }).then(function (mod) {\n          (0, _hoistNonReactStatics2.default)(UniversalComponent, mod, {\n            preload: true,\n            preloadWeak: true\n          });\n          return mod;\n        });\n      }\n      /* eslint-enable react/sort-comp */\n\n      /* eslint-disable react/sort-comp */\n\n    }, {\n      key: 'preloadWeak',\n      value: function preloadWeak(props) {\n        props = props || {};\n\n        var _req3 = (0, _requireUniversalModule2.default)(asyncModule, options, props),\n            requireSync = _req3.requireSync;\n\n        var mod = requireSync(props);\n\n        if (mod) {\n          (0, _hoistNonReactStatics2.default)(UniversalComponent, mod, {\n            preload: true,\n            preloadWeak: true\n          });\n        }\n\n        return mod;\n      }\n    }]);\n\n    function UniversalComponent(props, context) {\n      _classCallCheck(this, UniversalComponent);\n\n      var _this = _possibleConstructorReturn(this, (UniversalComponent.__proto__ || Object.getPrototypeOf(UniversalComponent)).call(this, props, context));\n\n      _this.update = function (state) {\n        var isMount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var isSync = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var isServer = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        if (!_this._initialized) return;\n        if (!state.error) state.error = null;\n\n        _this.handleAfter(state, isMount, isSync, isServer);\n      };\n\n      _this.state = _this.init(_this.props); // $FlowFixMe\n\n      _this.state.error = null;\n      return _this;\n    }\n\n    _createClass(UniversalComponent, [{\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        this._initialized = true;\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate(prevProps) {\n        var _this3 = this;\n\n        if (isDynamic || this._asyncOnly) {\n          var _req4 = (0, _requireUniversalModule2.default)(asyncModule, options, this.props, prevProps),\n              requireSync = _req4.requireSync,\n              requireAsync = _req4.requireAsync,\n              shouldUpdate = _req4.shouldUpdate;\n\n          if (shouldUpdate(this.props, prevProps)) {\n            var mod = void 0;\n\n            try {\n              mod = requireSync(this.props);\n            } catch (error) {\n              return this.update({\n                error: error\n              });\n            }\n\n            this.handleBefore(false, !!mod);\n\n            if (!mod) {\n              return this.requireAsyncInner(requireAsync, this.props, {\n                mod: mod\n              });\n            }\n\n            var state = {\n              mod: mod\n            };\n\n            if (alwaysDelay) {\n              if (loadingTransition) this.update({\n                mod: null\n              }); // display `loading` during componentWillReceiveProps\n\n              setTimeout(function () {\n                return _this3.update(state, false, true);\n              }, minDelay);\n              return;\n            }\n\n            this.update(state, false, true);\n          }\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        this._initialized = false;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _props = this.props,\n            isLoading = _props.isLoading,\n            userError = _props.error,\n            props = _objectWithoutProperties(_props, ['isLoading', 'error']);\n\n        var _state = this.state,\n            mod = _state.mod,\n            error = _state.error;\n        return renderFunc(props, mod, isLoading, userError || error);\n      }\n    }], [{\n      key: 'getDerivedStateFromProps',\n      value: function getDerivedStateFromProps(nextProps, currentState) {\n        var _req5 = (0, _requireUniversalModule2.default)(asyncModule, options, nextProps, currentState.props),\n            requireSync = _req5.requireSync,\n            shouldUpdate = _req5.shouldUpdate;\n\n        if (isHMR() && shouldUpdate(currentState.props, nextProps)) {\n          var mod = requireSync(nextProps);\n          return _extends({}, currentState, {\n            mod: mod\n          });\n        }\n\n        return null;\n      }\n    }]);\n\n    return UniversalComponent;\n  }(_react2.default.Component), _class.contextType = _context2.default, _temp;\n}","map":{"version":3,"sources":["/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/react-universal-component/dist/index.js"],"names":["Object","defineProperty","exports","value","setHasBabelPlugin","ReportChunks","MODULE_IDS","CHUNK_NAMES","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_requireUniversalModule","require","get","_reportChunks","_interopRequireDefault","default","universal","_react","_react2","_propTypes","_propTypes2","_hoistNonReactStatics","_hoistNonReactStatics2","_requireUniversalModule2","_context","_context2","_utils","_helpers","obj","__esModule","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_objectWithoutProperties","keys","indexOf","hasBabelPlugin","isHMR","module","hot","data","status","asyncModule","_class","_temp","opts","userRender","render","_opts$loading","loading","Loading","DefaultLoading","_opts$error","error","Err","DefaultError","_opts$minDelay","minDelay","_opts$alwaysDelay","alwaysDelay","_opts$testBabelPlugin","testBabelPlugin","_opts$loadingTransiti","loadingTransition","options","renderFunc","createDefaultRender","isDynamic","usesBabelPlugin","modCache","promCache","_React$Component","UniversalComponent","requireAsyncInner","requireAsync","state","isMount","_this2","mod","update","time","Date","then","timeLapsed","extraDelay","setTimeout","catch","handleBefore","isSync","isServer","onBefore","info","handleAfter","preload","preloadWeak","onAfter","onError","setState","init","_req","addModule","requireSync","asyncOnly","__update","_initialized","_asyncOnly","chunkName","context","report","_req2","Promise","reject","resolve","_req3","_this","getPrototypeOf","componentDidMount","componentDidUpdate","prevProps","_this3","_req4","shouldUpdate","componentWillUnmount","_props","isLoading","userError","_state","getDerivedStateFromProps","nextProps","currentState","_req5","Component","contextType"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setHasBabelPlugin = exports.ReportChunks = exports.MODULE_IDS = exports.CHUNK_NAMES = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _requireUniversalModule = require('./requireUniversalModule');\n\nObject.defineProperty(exports, 'CHUNK_NAMES', {\n  enumerable: true,\n  get: function get() {\n    return _requireUniversalModule.CHUNK_NAMES;\n  }\n});\nObject.defineProperty(exports, 'MODULE_IDS', {\n  enumerable: true,\n  get: function get() {\n    return _requireUniversalModule.MODULE_IDS;\n  }\n});\n\nvar _reportChunks = require('./report-chunks');\n\nObject.defineProperty(exports, 'ReportChunks', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_reportChunks).default;\n  }\n});\nexports.default = universal;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _requireUniversalModule2 = _interopRequireDefault(_requireUniversalModule);\n\nvar _context = require('./context');\n\nvar _context2 = _interopRequireDefault(_context);\n\nvar _utils = require('./utils');\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar hasBabelPlugin = false;\n\nvar isHMR = function isHMR() {\n  return (\n    // $FlowIgnore\n    module.hot && (module.hot.data || module.hot.status() === 'apply')\n  );\n};\n\nvar setHasBabelPlugin = exports.setHasBabelPlugin = function setHasBabelPlugin() {\n  hasBabelPlugin = true;\n};\n\nfunction universal(asyncModule) {\n  var _class, _temp;\n\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var userRender = opts.render,\n      _opts$loading = opts.loading,\n      Loading = _opts$loading === undefined ? _utils.DefaultLoading : _opts$loading,\n      _opts$error = opts.error,\n      Err = _opts$error === undefined ? _utils.DefaultError : _opts$error,\n      _opts$minDelay = opts.minDelay,\n      minDelay = _opts$minDelay === undefined ? 0 : _opts$minDelay,\n      _opts$alwaysDelay = opts.alwaysDelay,\n      alwaysDelay = _opts$alwaysDelay === undefined ? false : _opts$alwaysDelay,\n      _opts$testBabelPlugin = opts.testBabelPlugin,\n      testBabelPlugin = _opts$testBabelPlugin === undefined ? false : _opts$testBabelPlugin,\n      _opts$loadingTransiti = opts.loadingTransition,\n      loadingTransition = _opts$loadingTransiti === undefined ? true : _opts$loadingTransiti,\n      options = _objectWithoutProperties(opts, ['render', 'loading', 'error', 'minDelay', 'alwaysDelay', 'testBabelPlugin', 'loadingTransition']);\n\n  var renderFunc = userRender || (0, _utils.createDefaultRender)(Loading, Err);\n\n  var isDynamic = hasBabelPlugin || testBabelPlugin;\n  options.isDynamic = isDynamic;\n  options.usesBabelPlugin = hasBabelPlugin;\n  options.modCache = {};\n  options.promCache = {};\n\n  return _temp = _class = function (_React$Component) {\n    _inherits(UniversalComponent, _React$Component);\n\n    _createClass(UniversalComponent, [{\n      key: 'requireAsyncInner',\n      value: function requireAsyncInner(requireAsync, props, state, isMount) {\n        var _this2 = this;\n\n        if (!state.mod && loadingTransition) {\n          this.update({ mod: null, props: props }); // display `loading` during componentWillReceiveProps\n        }\n\n        var time = new Date();\n\n        requireAsync(props).then(function (mod) {\n          var state = { mod: mod, props: props };\n\n          var timeLapsed = new Date() - time;\n          if (timeLapsed < minDelay) {\n            var extraDelay = minDelay - timeLapsed;\n            return setTimeout(function () {\n              return _this2.update(state, isMount);\n            }, extraDelay);\n          }\n\n          _this2.update(state, isMount);\n        }).catch(function (error) {\n          return _this2.update({ error: error, props: props });\n        });\n      }\n    }, {\n      key: 'handleBefore',\n      value: function handleBefore(isMount, isSync) {\n        var isServer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n        if (this.props.onBefore) {\n          var onBefore = this.props.onBefore;\n\n          var info = { isMount: isMount, isSync: isSync, isServer: isServer };\n          onBefore(info);\n        }\n      }\n    }, {\n      key: 'handleAfter',\n      value: function handleAfter(state, isMount, isSync, isServer) {\n        var mod = state.mod,\n            error = state.error;\n\n\n        if (mod && !error) {\n          (0, _hoistNonReactStatics2.default)(UniversalComponent, mod, {\n            preload: true,\n            preloadWeak: true\n          });\n\n          if (this.props.onAfter) {\n            var onAfter = this.props.onAfter;\n\n            var info = { isMount: isMount, isSync: isSync, isServer: isServer };\n            onAfter(info, mod);\n          }\n        } else if (error && this.props.onError) {\n          this.props.onError(error);\n        }\n\n        this.setState(state);\n      }\n      // $FlowFixMe\n\n    }, {\n      key: 'init',\n      value: function init(props) {\n        var _req = (0, _requireUniversalModule2.default)(asyncModule, options, props),\n            addModule = _req.addModule,\n            requireSync = _req.requireSync,\n            requireAsync = _req.requireAsync,\n            asyncOnly = _req.asyncOnly;\n\n        var mod = void 0;\n\n        try {\n          mod = requireSync(props);\n        } catch (error) {\n          return (0, _helpers.__update)(props, { error: error, props: props }, this._initialized);\n        }\n\n        this._asyncOnly = asyncOnly;\n        var chunkName = addModule(props); // record the module for SSR flushing :)\n        if (this.context && this.context.report) {\n          this.context.report(chunkName);\n        }\n\n        if (mod || _utils.isServer) {\n          this.handleBefore(true, true, _utils.isServer);\n          return (0, _helpers.__update)(props, { asyncOnly: asyncOnly, props: props, mod: mod }, this._initialized, true, true, _utils.isServer);\n        }\n\n        this.handleBefore(true, false);\n        this.requireAsyncInner(requireAsync, props, { props: props, asyncOnly: asyncOnly, mod: mod }, true);\n        return { mod: mod, asyncOnly: asyncOnly, props: props };\n      }\n    }], [{\n      key: 'preload',\n      value: function preload(props) {\n        props = props || {};\n\n        var _req2 = (0, _requireUniversalModule2.default)(asyncModule, options, props),\n            requireAsync = _req2.requireAsync,\n            requireSync = _req2.requireSync;\n\n        var mod = void 0;\n\n        try {\n          mod = requireSync(props);\n        } catch (error) {\n          return Promise.reject(error);\n        }\n\n        return Promise.resolve().then(function () {\n          if (mod) return mod;\n          return requireAsync(props);\n        }).then(function (mod) {\n          (0, _hoistNonReactStatics2.default)(UniversalComponent, mod, {\n            preload: true,\n            preloadWeak: true\n          });\n          return mod;\n        });\n      }\n      /* eslint-enable react/sort-comp */\n\n      /* eslint-disable react/sort-comp */\n\n    }, {\n      key: 'preloadWeak',\n      value: function preloadWeak(props) {\n        props = props || {};\n\n        var _req3 = (0, _requireUniversalModule2.default)(asyncModule, options, props),\n            requireSync = _req3.requireSync;\n\n        var mod = requireSync(props);\n        if (mod) {\n          (0, _hoistNonReactStatics2.default)(UniversalComponent, mod, {\n            preload: true,\n            preloadWeak: true\n          });\n        }\n\n        return mod;\n      }\n    }]);\n\n    function UniversalComponent(props, context) {\n      _classCallCheck(this, UniversalComponent);\n\n      var _this = _possibleConstructorReturn(this, (UniversalComponent.__proto__ || Object.getPrototypeOf(UniversalComponent)).call(this, props, context));\n\n      _this.update = function (state) {\n        var isMount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var isSync = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var isServer = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n        if (!_this._initialized) return;\n        if (!state.error) state.error = null;\n\n        _this.handleAfter(state, isMount, isSync, isServer);\n      };\n\n      _this.state = _this.init(_this.props);\n      // $FlowFixMe\n      _this.state.error = null;\n      return _this;\n    }\n\n    _createClass(UniversalComponent, [{\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        this._initialized = true;\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate(prevProps) {\n        var _this3 = this;\n\n        if (isDynamic || this._asyncOnly) {\n          var _req4 = (0, _requireUniversalModule2.default)(asyncModule, options, this.props, prevProps),\n              requireSync = _req4.requireSync,\n              requireAsync = _req4.requireAsync,\n              shouldUpdate = _req4.shouldUpdate;\n\n          if (shouldUpdate(this.props, prevProps)) {\n            var mod = void 0;\n\n            try {\n              mod = requireSync(this.props);\n            } catch (error) {\n              return this.update({ error: error });\n            }\n\n            this.handleBefore(false, !!mod);\n\n            if (!mod) {\n              return this.requireAsyncInner(requireAsync, this.props, { mod: mod });\n            }\n\n            var state = { mod: mod };\n\n            if (alwaysDelay) {\n              if (loadingTransition) this.update({ mod: null }); // display `loading` during componentWillReceiveProps\n              setTimeout(function () {\n                return _this3.update(state, false, true);\n              }, minDelay);\n              return;\n            }\n\n            this.update(state, false, true);\n          }\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        this._initialized = false;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _props = this.props,\n            isLoading = _props.isLoading,\n            userError = _props.error,\n            props = _objectWithoutProperties(_props, ['isLoading', 'error']);\n\n        var _state = this.state,\n            mod = _state.mod,\n            error = _state.error;\n\n        return renderFunc(props, mod, isLoading, userError || error);\n      }\n    }], [{\n      key: 'getDerivedStateFromProps',\n      value: function getDerivedStateFromProps(nextProps, currentState) {\n        var _req5 = (0, _requireUniversalModule2.default)(asyncModule, options, nextProps, currentState.props),\n            requireSync = _req5.requireSync,\n            shouldUpdate = _req5.shouldUpdate;\n\n        if (isHMR() && shouldUpdate(currentState.props, nextProps)) {\n          var mod = requireSync(nextProps);\n          return _extends({}, currentState, { mod: mod });\n        }\n        return null;\n      }\n    }]);\n\n    return UniversalComponent;\n  }(_react2.default.Component), _class.contextType = _context2.default, _temp;\n}"]},"metadata":{},"sourceType":"script"}