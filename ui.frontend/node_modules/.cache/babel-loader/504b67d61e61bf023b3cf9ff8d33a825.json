{"ast":null,"code":"'use strict';\n\nvar _toConsumableArray = require(\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _classCallCheck = require(\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _get = require(\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get\");\n\nvar _getPrototypeOf = require(\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _createForOfIteratorHelper = require(\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _require = require('./symbols'),\n    isClean = _require.isClean,\n    my = _require.my;\n\nvar Declaration = require('./declaration');\n\nvar Comment = require('./comment');\n\nvar Node = require('./node');\n\nvar parse, Rule, AtRule;\n\nfunction cleanSource(nodes) {\n  return nodes.map(function (i) {\n    if (i.nodes) i.nodes = cleanSource(i.nodes);\n    delete i.source;\n    return i;\n  });\n}\n\nfunction markDirtyUp(node) {\n  node[isClean] = false;\n\n  if (node.proxyOf.nodes) {\n    var _iterator = _createForOfIteratorHelper(node.proxyOf.nodes),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var i = _step.value;\n        markDirtyUp(i);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n}\n\nvar Container = /*#__PURE__*/function (_Node) {\n  _inherits(Container, _Node);\n\n  var _super = _createSuper(Container);\n\n  function Container() {\n    _classCallCheck(this, Container);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Container, [{\n    key: \"push\",\n    value: function push(child) {\n      child.parent = this;\n      this.proxyOf.nodes.push(child);\n      return this;\n    }\n  }, {\n    key: \"each\",\n    value: function each(callback) {\n      if (!this.proxyOf.nodes) return undefined;\n      var iterator = this.getIterator();\n      var index, result;\n\n      while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n        index = this.indexes[iterator];\n        result = callback(this.proxyOf.nodes[index], index);\n        if (result === false) break;\n        this.indexes[iterator] += 1;\n      }\n\n      delete this.indexes[iterator];\n      return result;\n    }\n  }, {\n    key: \"walk\",\n    value: function walk(callback) {\n      return this.each(function (child, i) {\n        var result;\n\n        try {\n          result = callback(child, i);\n        } catch (e) {\n          throw child.addToError(e);\n        }\n\n        if (result !== false && child.walk) {\n          result = child.walk(callback);\n        }\n\n        return result;\n      });\n    }\n  }, {\n    key: \"walkDecls\",\n    value: function walkDecls(prop, callback) {\n      if (!callback) {\n        callback = prop;\n        return this.walk(function (child, i) {\n          if (child.type === 'decl') {\n            return callback(child, i);\n          }\n        });\n      }\n\n      if (prop instanceof RegExp) {\n        return this.walk(function (child, i) {\n          if (child.type === 'decl' && prop.test(child.prop)) {\n            return callback(child, i);\n          }\n        });\n      }\n\n      return this.walk(function (child, i) {\n        if (child.type === 'decl' && child.prop === prop) {\n          return callback(child, i);\n        }\n      });\n    }\n  }, {\n    key: \"walkRules\",\n    value: function walkRules(selector, callback) {\n      if (!callback) {\n        callback = selector;\n        return this.walk(function (child, i) {\n          if (child.type === 'rule') {\n            return callback(child, i);\n          }\n        });\n      }\n\n      if (selector instanceof RegExp) {\n        return this.walk(function (child, i) {\n          if (child.type === 'rule' && selector.test(child.selector)) {\n            return callback(child, i);\n          }\n        });\n      }\n\n      return this.walk(function (child, i) {\n        if (child.type === 'rule' && child.selector === selector) {\n          return callback(child, i);\n        }\n      });\n    }\n  }, {\n    key: \"walkAtRules\",\n    value: function walkAtRules(name, callback) {\n      if (!callback) {\n        callback = name;\n        return this.walk(function (child, i) {\n          if (child.type === 'atrule') {\n            return callback(child, i);\n          }\n        });\n      }\n\n      if (name instanceof RegExp) {\n        return this.walk(function (child, i) {\n          if (child.type === 'atrule' && name.test(child.name)) {\n            return callback(child, i);\n          }\n        });\n      }\n\n      return this.walk(function (child, i) {\n        if (child.type === 'atrule' && child.name === name) {\n          return callback(child, i);\n        }\n      });\n    }\n  }, {\n    key: \"walkComments\",\n    value: function walkComments(callback) {\n      return this.walk(function (child, i) {\n        if (child.type === 'comment') {\n          return callback(child, i);\n        }\n      });\n    }\n  }, {\n    key: \"append\",\n    value: function append() {\n      for (var _len = arguments.length, children = new Array(_len), _key = 0; _key < _len; _key++) {\n        children[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _children = children; _i < _children.length; _i++) {\n        var child = _children[_i];\n        var nodes = this.normalize(child, this.last);\n\n        var _iterator2 = _createForOfIteratorHelper(nodes),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var node = _step2.value;\n            this.proxyOf.nodes.push(node);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n\n      this.markDirty();\n      return this;\n    }\n  }, {\n    key: \"prepend\",\n    value: function prepend() {\n      for (var _len2 = arguments.length, children = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        children[_key2] = arguments[_key2];\n      }\n\n      children = children.reverse();\n\n      var _iterator3 = _createForOfIteratorHelper(children),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var child = _step3.value;\n          var nodes = this.normalize(child, this.first, 'prepend').reverse();\n\n          var _iterator4 = _createForOfIteratorHelper(nodes),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var node = _step4.value;\n              this.proxyOf.nodes.unshift(node);\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n\n          for (var id in this.indexes) {\n            this.indexes[id] = this.indexes[id] + nodes.length;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      this.markDirty();\n      return this;\n    }\n  }, {\n    key: \"cleanRaws\",\n    value: function cleanRaws(keepBetween) {\n      _get(_getPrototypeOf(Container.prototype), \"cleanRaws\", this).call(this, keepBetween);\n\n      if (this.nodes) {\n        var _iterator5 = _createForOfIteratorHelper(this.nodes),\n            _step5;\n\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var node = _step5.value;\n            node.cleanRaws(keepBetween);\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      }\n    }\n  }, {\n    key: \"insertBefore\",\n    value: function insertBefore(exist, add) {\n      exist = this.index(exist);\n      var type = exist === 0 ? 'prepend' : false;\n      var nodes = this.normalize(add, this.proxyOf.nodes[exist], type).reverse();\n\n      var _iterator6 = _createForOfIteratorHelper(nodes),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var node = _step6.value;\n          this.proxyOf.nodes.splice(exist, 0, node);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n\n      var index;\n\n      for (var id in this.indexes) {\n        index = this.indexes[id];\n\n        if (exist <= index) {\n          this.indexes[id] = index + nodes.length;\n        }\n      }\n\n      this.markDirty();\n      return this;\n    }\n  }, {\n    key: \"insertAfter\",\n    value: function insertAfter(exist, add) {\n      exist = this.index(exist);\n      var nodes = this.normalize(add, this.proxyOf.nodes[exist]).reverse();\n\n      var _iterator7 = _createForOfIteratorHelper(nodes),\n          _step7;\n\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var node = _step7.value;\n          this.proxyOf.nodes.splice(exist + 1, 0, node);\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n\n      var index;\n\n      for (var id in this.indexes) {\n        index = this.indexes[id];\n\n        if (exist < index) {\n          this.indexes[id] = index + nodes.length;\n        }\n      }\n\n      this.markDirty();\n      return this;\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(child) {\n      child = this.index(child);\n      this.proxyOf.nodes[child].parent = undefined;\n      this.proxyOf.nodes.splice(child, 1);\n      var index;\n\n      for (var id in this.indexes) {\n        index = this.indexes[id];\n\n        if (index >= child) {\n          this.indexes[id] = index - 1;\n        }\n      }\n\n      this.markDirty();\n      return this;\n    }\n  }, {\n    key: \"removeAll\",\n    value: function removeAll() {\n      var _iterator8 = _createForOfIteratorHelper(this.proxyOf.nodes),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var node = _step8.value;\n          node.parent = undefined;\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n\n      this.proxyOf.nodes = [];\n      this.markDirty();\n      return this;\n    }\n  }, {\n    key: \"replaceValues\",\n    value: function replaceValues(pattern, opts, callback) {\n      if (!callback) {\n        callback = opts;\n        opts = {};\n      }\n\n      this.walkDecls(function (decl) {\n        if (opts.props && !opts.props.includes(decl.prop)) return;\n        if (opts.fast && !decl.value.includes(opts.fast)) return;\n        decl.value = decl.value.replace(pattern, callback);\n      });\n      this.markDirty();\n      return this;\n    }\n  }, {\n    key: \"every\",\n    value: function every(condition) {\n      return this.nodes.every(condition);\n    }\n  }, {\n    key: \"some\",\n    value: function some(condition) {\n      return this.nodes.some(condition);\n    }\n  }, {\n    key: \"index\",\n    value: function index(child) {\n      if (typeof child === 'number') return child;\n      if (child.proxyOf) child = child.proxyOf;\n      return this.proxyOf.nodes.indexOf(child);\n    }\n  }, {\n    key: \"first\",\n    get: function get() {\n      if (!this.proxyOf.nodes) return undefined;\n      return this.proxyOf.nodes[0];\n    }\n  }, {\n    key: \"last\",\n    get: function get() {\n      if (!this.proxyOf.nodes) return undefined;\n      return this.proxyOf.nodes[this.proxyOf.nodes.length - 1];\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize(nodes, sample) {\n      var _this = this;\n\n      if (typeof nodes === 'string') {\n        nodes = cleanSource(parse(nodes).nodes);\n      } else if (Array.isArray(nodes)) {\n        nodes = nodes.slice(0);\n\n        var _iterator9 = _createForOfIteratorHelper(nodes),\n            _step9;\n\n        try {\n          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n            var i = _step9.value;\n            if (i.parent) i.parent.removeChild(i, 'ignore');\n          }\n        } catch (err) {\n          _iterator9.e(err);\n        } finally {\n          _iterator9.f();\n        }\n      } else if (nodes.type === 'root' && this.type !== 'document') {\n        nodes = nodes.nodes.slice(0);\n\n        var _iterator10 = _createForOfIteratorHelper(nodes),\n            _step10;\n\n        try {\n          for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n            var _i2 = _step10.value;\n            if (_i2.parent) _i2.parent.removeChild(_i2, 'ignore');\n          }\n        } catch (err) {\n          _iterator10.e(err);\n        } finally {\n          _iterator10.f();\n        }\n      } else if (nodes.type) {\n        nodes = [nodes];\n      } else if (nodes.prop) {\n        if (typeof nodes.value === 'undefined') {\n          throw new Error('Value field is missed in node creation');\n        } else if (typeof nodes.value !== 'string') {\n          nodes.value = String(nodes.value);\n        }\n\n        nodes = [new Declaration(nodes)];\n      } else if (nodes.selector) {\n        nodes = [new Rule(nodes)];\n      } else if (nodes.name) {\n        nodes = [new AtRule(nodes)];\n      } else if (nodes.text) {\n        nodes = [new Comment(nodes)];\n      } else {\n        throw new Error('Unknown node type in node creation');\n      }\n\n      var processed = nodes.map(function (i) {\n        // istanbul ignore next\n        if (!i[my]) Container.rebuild(i);\n        i = i.proxyOf;\n        if (i.parent) i.parent.removeChild(i);\n        if (i[isClean]) markDirtyUp(i);\n\n        if (typeof i.raws.before === 'undefined') {\n          if (sample && typeof sample.raws.before !== 'undefined') {\n            i.raws.before = sample.raws.before.replace(/\\S/g, '');\n          }\n        }\n\n        i.parent = _this;\n        return i;\n      });\n      return processed;\n    }\n  }, {\n    key: \"getProxyProcessor\",\n    value: function getProxyProcessor() {\n      return {\n        set: function set(node, prop, value) {\n          if (node[prop] === value) return true;\n          node[prop] = value;\n\n          if (prop === 'name' || prop === 'params' || prop === 'selector') {\n            node.markDirty();\n          }\n\n          return true;\n        },\n        get: function get(node, prop) {\n          if (prop === 'proxyOf') {\n            return node;\n          } else if (!node[prop]) {\n            return node[prop];\n          } else if (prop === 'each' || typeof prop === 'string' && prop.startsWith('walk')) {\n            return function () {\n              for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                args[_key3] = arguments[_key3];\n              }\n\n              return node[prop].apply(node, _toConsumableArray(args.map(function (i) {\n                if (typeof i === 'function') {\n                  return function (child, index) {\n                    return i(child.toProxy(), index);\n                  };\n                } else {\n                  return i;\n                }\n              })));\n            };\n          } else if (prop === 'every' || prop === 'some') {\n            return function (cb) {\n              return node[prop](function (child) {\n                for (var _len4 = arguments.length, other = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n                  other[_key4 - 1] = arguments[_key4];\n                }\n\n                return cb.apply(void 0, [child.toProxy()].concat(other));\n              });\n            };\n          } else if (prop === 'root') {\n            return function () {\n              return node.root().toProxy();\n            };\n          } else if (prop === 'nodes') {\n            return node.nodes.map(function (i) {\n              return i.toProxy();\n            });\n          } else if (prop === 'first' || prop === 'last') {\n            return node[prop].toProxy();\n          } else {\n            return node[prop];\n          }\n        }\n      };\n    }\n  }, {\n    key: \"getIterator\",\n    value: function getIterator() {\n      if (!this.lastEach) this.lastEach = 0;\n      if (!this.indexes) this.indexes = {};\n      this.lastEach += 1;\n      var iterator = this.lastEach;\n      this.indexes[iterator] = 0;\n      return iterator;\n    }\n  }]);\n\n  return Container;\n}(Node);\n\nContainer.registerParse = function (dependant) {\n  parse = dependant;\n};\n\nContainer.registerRule = function (dependant) {\n  Rule = dependant;\n};\n\nContainer.registerAtRule = function (dependant) {\n  AtRule = dependant;\n};\n\nmodule.exports = Container;\nContainer.default = Container; // istanbul ignore next\n\nContainer.rebuild = function (node) {\n  if (node.type === 'atrule') {\n    Object.setPrototypeOf(node, AtRule.prototype);\n  } else if (node.type === 'rule') {\n    Object.setPrototypeOf(node, Rule.prototype);\n  } else if (node.type === 'decl') {\n    Object.setPrototypeOf(node, Declaration.prototype);\n  } else if (node.type === 'comment') {\n    Object.setPrototypeOf(node, Comment.prototype);\n  }\n\n  node[my] = true;\n\n  if (node.nodes) {\n    node.nodes.forEach(function (child) {\n      Container.rebuild(child);\n    });\n  }\n};","map":{"version":3,"sources":["/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/sanitize-html/node_modules/postcss/lib/container.js"],"names":["require","isClean","my","Declaration","Comment","Node","parse","Rule","AtRule","cleanSource","nodes","map","i","source","markDirtyUp","node","proxyOf","Container","child","parent","push","callback","undefined","iterator","getIterator","index","result","indexes","length","each","e","addToError","walk","prop","type","RegExp","test","selector","name","children","normalize","last","markDirty","reverse","first","unshift","id","keepBetween","cleanRaws","exist","add","splice","pattern","opts","walkDecls","decl","props","includes","fast","value","replace","condition","every","some","indexOf","sample","Array","isArray","slice","removeChild","Error","String","text","processed","rebuild","raws","before","set","get","startsWith","args","toProxy","cb","other","root","lastEach","registerParse","dependant","registerRule","registerAtRule","module","exports","default","Object","setPrototypeOf","prototype","forEach"],"mappings":"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","sourcesContent":["'use strict'\n\nlet { isClean, my } = require('./symbols')\nlet Declaration = require('./declaration')\nlet Comment = require('./comment')\nlet Node = require('./node')\n\nlet parse, Rule, AtRule\n\nfunction cleanSource(nodes) {\n  return nodes.map(i => {\n    if (i.nodes) i.nodes = cleanSource(i.nodes)\n    delete i.source\n    return i\n  })\n}\n\nfunction markDirtyUp(node) {\n  node[isClean] = false\n  if (node.proxyOf.nodes) {\n    for (let i of node.proxyOf.nodes) {\n      markDirtyUp(i)\n    }\n  }\n}\n\nclass Container extends Node {\n  push(child) {\n    child.parent = this\n    this.proxyOf.nodes.push(child)\n    return this\n  }\n\n  each(callback) {\n    if (!this.proxyOf.nodes) return undefined\n    let iterator = this.getIterator()\n\n    let index, result\n    while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n      index = this.indexes[iterator]\n      result = callback(this.proxyOf.nodes[index], index)\n      if (result === false) break\n\n      this.indexes[iterator] += 1\n    }\n\n    delete this.indexes[iterator]\n    return result\n  }\n\n  walk(callback) {\n    return this.each((child, i) => {\n      let result\n      try {\n        result = callback(child, i)\n      } catch (e) {\n        throw child.addToError(e)\n      }\n      if (result !== false && child.walk) {\n        result = child.walk(callback)\n      }\n\n      return result\n    })\n  }\n\n  walkDecls(prop, callback) {\n    if (!callback) {\n      callback = prop\n      return this.walk((child, i) => {\n        if (child.type === 'decl') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (prop instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'decl' && prop.test(child.prop)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'decl' && child.prop === prop) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkRules(selector, callback) {\n    if (!callback) {\n      callback = selector\n\n      return this.walk((child, i) => {\n        if (child.type === 'rule') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (selector instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'rule' && selector.test(child.selector)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'rule' && child.selector === selector) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkAtRules(name, callback) {\n    if (!callback) {\n      callback = name\n      return this.walk((child, i) => {\n        if (child.type === 'atrule') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (name instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'atrule' && name.test(child.name)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'atrule' && child.name === name) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkComments(callback) {\n    return this.walk((child, i) => {\n      if (child.type === 'comment') {\n        return callback(child, i)\n      }\n    })\n  }\n\n  append(...children) {\n    for (let child of children) {\n      let nodes = this.normalize(child, this.last)\n      for (let node of nodes) this.proxyOf.nodes.push(node)\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  prepend(...children) {\n    children = children.reverse()\n    for (let child of children) {\n      let nodes = this.normalize(child, this.first, 'prepend').reverse()\n      for (let node of nodes) this.proxyOf.nodes.unshift(node)\n      for (let id in this.indexes) {\n        this.indexes[id] = this.indexes[id] + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  cleanRaws(keepBetween) {\n    super.cleanRaws(keepBetween)\n    if (this.nodes) {\n      for (let node of this.nodes) node.cleanRaws(keepBetween)\n    }\n  }\n\n  insertBefore(exist, add) {\n    exist = this.index(exist)\n\n    let type = exist === 0 ? 'prepend' : false\n    let nodes = this.normalize(add, this.proxyOf.nodes[exist], type).reverse()\n    for (let node of nodes) this.proxyOf.nodes.splice(exist, 0, node)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (exist <= index) {\n        this.indexes[id] = index + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  insertAfter(exist, add) {\n    exist = this.index(exist)\n\n    let nodes = this.normalize(add, this.proxyOf.nodes[exist]).reverse()\n    for (let node of nodes) this.proxyOf.nodes.splice(exist + 1, 0, node)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (exist < index) {\n        this.indexes[id] = index + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  removeChild(child) {\n    child = this.index(child)\n    this.proxyOf.nodes[child].parent = undefined\n    this.proxyOf.nodes.splice(child, 1)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (index >= child) {\n        this.indexes[id] = index - 1\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  removeAll() {\n    for (let node of this.proxyOf.nodes) node.parent = undefined\n    this.proxyOf.nodes = []\n\n    this.markDirty()\n\n    return this\n  }\n\n  replaceValues(pattern, opts, callback) {\n    if (!callback) {\n      callback = opts\n      opts = {}\n    }\n\n    this.walkDecls(decl => {\n      if (opts.props && !opts.props.includes(decl.prop)) return\n      if (opts.fast && !decl.value.includes(opts.fast)) return\n\n      decl.value = decl.value.replace(pattern, callback)\n    })\n\n    this.markDirty()\n\n    return this\n  }\n\n  every(condition) {\n    return this.nodes.every(condition)\n  }\n\n  some(condition) {\n    return this.nodes.some(condition)\n  }\n\n  index(child) {\n    if (typeof child === 'number') return child\n    if (child.proxyOf) child = child.proxyOf\n    return this.proxyOf.nodes.indexOf(child)\n  }\n\n  get first() {\n    if (!this.proxyOf.nodes) return undefined\n    return this.proxyOf.nodes[0]\n  }\n\n  get last() {\n    if (!this.proxyOf.nodes) return undefined\n    return this.proxyOf.nodes[this.proxyOf.nodes.length - 1]\n  }\n\n  normalize(nodes, sample) {\n    if (typeof nodes === 'string') {\n      nodes = cleanSource(parse(nodes).nodes)\n    } else if (Array.isArray(nodes)) {\n      nodes = nodes.slice(0)\n      for (let i of nodes) {\n        if (i.parent) i.parent.removeChild(i, 'ignore')\n      }\n    } else if (nodes.type === 'root' && this.type !== 'document') {\n      nodes = nodes.nodes.slice(0)\n      for (let i of nodes) {\n        if (i.parent) i.parent.removeChild(i, 'ignore')\n      }\n    } else if (nodes.type) {\n      nodes = [nodes]\n    } else if (nodes.prop) {\n      if (typeof nodes.value === 'undefined') {\n        throw new Error('Value field is missed in node creation')\n      } else if (typeof nodes.value !== 'string') {\n        nodes.value = String(nodes.value)\n      }\n      nodes = [new Declaration(nodes)]\n    } else if (nodes.selector) {\n      nodes = [new Rule(nodes)]\n    } else if (nodes.name) {\n      nodes = [new AtRule(nodes)]\n    } else if (nodes.text) {\n      nodes = [new Comment(nodes)]\n    } else {\n      throw new Error('Unknown node type in node creation')\n    }\n\n    let processed = nodes.map(i => {\n      // istanbul ignore next\n      if (!i[my]) Container.rebuild(i)\n      i = i.proxyOf\n      if (i.parent) i.parent.removeChild(i)\n      if (i[isClean]) markDirtyUp(i)\n      if (typeof i.raws.before === 'undefined') {\n        if (sample && typeof sample.raws.before !== 'undefined') {\n          i.raws.before = sample.raws.before.replace(/\\S/g, '')\n        }\n      }\n      i.parent = this\n      return i\n    })\n\n    return processed\n  }\n\n  getProxyProcessor() {\n    return {\n      set(node, prop, value) {\n        if (node[prop] === value) return true\n        node[prop] = value\n        if (prop === 'name' || prop === 'params' || prop === 'selector') {\n          node.markDirty()\n        }\n        return true\n      },\n\n      get(node, prop) {\n        if (prop === 'proxyOf') {\n          return node\n        } else if (!node[prop]) {\n          return node[prop]\n        } else if (\n          prop === 'each' ||\n          (typeof prop === 'string' && prop.startsWith('walk'))\n        ) {\n          return (...args) => {\n            return node[prop](\n              ...args.map(i => {\n                if (typeof i === 'function') {\n                  return (child, index) => i(child.toProxy(), index)\n                } else {\n                  return i\n                }\n              })\n            )\n          }\n        } else if (prop === 'every' || prop === 'some') {\n          return cb => {\n            return node[prop]((child, ...other) =>\n              cb(child.toProxy(), ...other)\n            )\n          }\n        } else if (prop === 'root') {\n          return () => node.root().toProxy()\n        } else if (prop === 'nodes') {\n          return node.nodes.map(i => i.toProxy())\n        } else if (prop === 'first' || prop === 'last') {\n          return node[prop].toProxy()\n        } else {\n          return node[prop]\n        }\n      }\n    }\n  }\n\n  getIterator() {\n    if (!this.lastEach) this.lastEach = 0\n    if (!this.indexes) this.indexes = {}\n\n    this.lastEach += 1\n    let iterator = this.lastEach\n    this.indexes[iterator] = 0\n\n    return iterator\n  }\n}\n\nContainer.registerParse = dependant => {\n  parse = dependant\n}\n\nContainer.registerRule = dependant => {\n  Rule = dependant\n}\n\nContainer.registerAtRule = dependant => {\n  AtRule = dependant\n}\n\nmodule.exports = Container\nContainer.default = Container\n\n// istanbul ignore next\nContainer.rebuild = node => {\n  if (node.type === 'atrule') {\n    Object.setPrototypeOf(node, AtRule.prototype)\n  } else if (node.type === 'rule') {\n    Object.setPrototypeOf(node, Rule.prototype)\n  } else if (node.type === 'decl') {\n    Object.setPrototypeOf(node, Declaration.prototype)\n  } else if (node.type === 'comment') {\n    Object.setPrototypeOf(node, Comment.prototype)\n  }\n\n  node[my] = true\n\n  if (node.nodes) {\n    node.nodes.forEach(child => {\n      Container.rebuild(child)\n    })\n  }\n}\n"]},"metadata":{},"sourceType":"script"}