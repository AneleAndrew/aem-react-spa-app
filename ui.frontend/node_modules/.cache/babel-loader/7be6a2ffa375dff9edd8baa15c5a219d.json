{"ast":null,"code":"import _classCallCheck from\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{ModelClient}from'@adobe/aem-spa-page-model-manager';/**\n * Used to make react-server possible (localhost development).\n */var LocalDevModelClient=/*#__PURE__*/function(_ModelClient){_inherits(LocalDevModelClient,_ModelClient);var _super=_createSuper(LocalDevModelClient);function LocalDevModelClient(){_classCallCheck(this,LocalDevModelClient);return _super.apply(this,arguments);}_createClass(LocalDevModelClient,[{key:\"fetch\",value:function(_fetch){function fetch(_x){return _fetch.apply(this,arguments);}fetch.toString=function(){return _fetch.toString();};return fetch;}(function(modelPath){if(!modelPath){var err=\"Fetching model rejected for path: \".concat(modelPath);return Promise.reject(new Error(err));}// Either the API host has been provided or we make an absolute request relative to the current host\nvar apihostPrefix=this._apiHost||'';var url=\"\".concat(apihostPrefix).concat(modelPath);return fetch(url,{credentials:'same-origin',headers:{'Authorization':process.env.REACT_APP_AEM_AUTHORIZATION_HEADER}}).then(function(response){if(response.status>=200&&response.status<300){return response.json();}return Promise.reject(response);}).catch(function(error){return Promise.reject(error);});})}]);return LocalDevModelClient;}(ModelClient);export{LocalDevModelClient as default};","map":{"version":3,"sources":["/Users/anele.mzinyati/Documents/repos/aem-react-spa-app/ui.frontend/src/LocalDevModelClient.js"],"names":["ModelClient","LocalDevModelClient","modelPath","err","Promise","reject","Error","apihostPrefix","_apiHost","url","fetch","credentials","headers","process","env","REACT_APP_AEM_AUTHORIZATION_HEADER","then","response","status","json","catch","error"],"mappings":"wtBAAA,OAAQA,WAAR,KAA0B,mCAA1B,CAEA;AACA;AACA,G,GACqBC,CAAAA,mB,8aAEjB,SAAMC,SAAN,CAAiB,CAEb,GAAI,CAACA,SAAL,CAAgB,CACZ,GAAMC,CAAAA,GAAG,6CAAwCD,SAAxC,CAAT,CAEA,MAAOE,CAAAA,OAAO,CAACC,MAAR,CAAe,GAAIC,CAAAA,KAAJ,CAAUH,GAAV,CAAf,CAAP,CACH,CAED;AACA,GAAMI,CAAAA,aAAa,CAAG,KAAKC,QAAL,EAAiB,EAAvC,CACA,GAAMC,CAAAA,GAAG,WAAMF,aAAN,SAAsBL,SAAtB,CAAT,CAEA,MAAOQ,CAAAA,KAAK,CAACD,GAAD,CAAM,CACdE,WAAW,CAAE,aADC,CAEdC,OAAO,CAAE,CACL,gBAAiBC,OAAO,CAACC,GAAR,CAAYC,kCADxB,CAFK,CAAN,CAAL,CAKJC,IALI,CAKC,SAACC,QAAD,CAAc,CAClB,GAAKA,QAAQ,CAACC,MAAT,EAAmB,GAApB,EAA6BD,QAAQ,CAACC,MAAT,CAAkB,GAAnD,CAAyD,CACrD,MAAOD,CAAAA,QAAQ,CAACE,IAAT,EAAP,CACH,CAED,MAAOf,CAAAA,OAAO,CAACC,MAAR,CAAeY,QAAf,CAAP,CACH,CAXM,EAWJG,KAXI,CAWE,SAACC,KAAD,CAAW,CAChB,MAAOjB,CAAAA,OAAO,CAACC,MAAR,CAAegB,KAAf,CAAP,CACH,CAbM,CAAP,CAeH,C,kCA7B4CrB,W,SAA5BC,mB","sourcesContent":["import {ModelClient} from '@adobe/aem-spa-page-model-manager';\n\n/**\n * Used to make react-server possible (localhost development).\n */\nexport default class LocalDevModelClient extends ModelClient{\n\n    fetch(modelPath) {\n\n        if (!modelPath) {\n            const err = `Fetching model rejected for path: ${modelPath}`;\n\n            return Promise.reject(new Error(err));\n        }\n\n        // Either the API host has been provided or we make an absolute request relative to the current host\n        const apihostPrefix = this._apiHost || '';\n        const url = `${apihostPrefix}${modelPath}`;\n\n        return fetch(url, {\n            credentials: 'same-origin',\n            headers: {\n                'Authorization': process.env.REACT_APP_AEM_AUTHORIZATION_HEADER\n            }\n        }).then((response) => {\n            if ((response.status >= 200) && (response.status < 300)) {\n                return response.json() ;\n            }\n\n            return Promise.reject(response);\n        }).catch((error) => {\n            return Promise.reject(error);\n        });\n\n    }\n\n}"]},"metadata":{},"sourceType":"module"}